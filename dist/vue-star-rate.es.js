import{defineComponent as h,computed as L,openBlock as p,createElementBlock as g,createElementVNode as f,unref as v,ref as S,watch as x,onMounted as k,normalizeClass as A,Fragment as N,renderList as V,createVNode as C}from"vue";const M={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},w=["id"],E=["offset"],b=f("stop",{"stop-color":"#d2d5da",offset:"0%",id:"F1gst2"},null,-1),B=["fill"],R=h({__name:"IconStar",props:{offsetPercentage:{required:!1,default:0}},setup(r){const o=L(()=>"F1g-"+parseFloat((Math.random()*100).toString()).toFixed(0));return(e,a)=>(p(),g("svg",M,[f("defs",null,[f("linearGradient",{y2:"0%",x2:"100%",y1:"0%",x1:"0%",id:v(o)},[f("stop",{"stop-color":"#f9d949",offset:r.offsetPercentage+"%",id:"F1gst1"},null,8,E),b],8,w)]),f("path",{fill:"url(#"+v(o)+")",d:"M 30.335938 12.546875 L 20.164063 11.472656 L 16 2.132813 L 11.835938 11.472656 L 1.664063 12.546875 L 9.261719 19.394531 L 7.140625 29.398438 L 16 24.289063 L 24.859375 29.398438 L 22.738281 19.394531 Z"},null,8,B)]))}}),F=5,T=r=>{const o=S([]);return{generate:e=>{const a=r===5?e:e/2,m=Math.floor(a);let s=0;a%1!==0&&(s=Number(parseFloat((a%1).toString()).toFixed(2)));const u=s*100,d=[];for(let n=0;n<m;n++)d.push(100);d.push(u),[...Array(F).keys()].forEach(n=>{o.value[n]=d[n]})},starsSet:o}};var I="";const q=h({__name:"StarRating",props:{modelValue:{type:Number,default:0},score:{type:Number,default:0},starSet:{type:Number,default:5},readonly:{type:Boolean,default:!1}},emits:["valueChange","update:modelValue"],setup(r,{emit:o}){const e=r,a=S(0),{starsSet:m,generate:s}=T(e.starSet);let u=null;const d=l=>{if(e.starSet===5&&!e.readonly){const t=l+1;o("valueChange",t),o("update:modelValue",t),a.value=t}},n=(l,t)=>{let _=l.target.dataset.star;if(_&&t){const c=+_;u!==null&&cancelAnimationFrame(u),u=requestAnimationFrame(()=>{[...Array(F).keys()].forEach((i,y)=>{m.value[y]=y<=c?100:0})})}else s(a.value)};return x([()=>e.score,()=>e.modelValue],l=>{s(l[1])}),k(()=>{a.value=e.score||e.modelValue,s(a.value)}),(l,t)=>(p(),g("div",{"data-test":"star-container",class:A(["rating__container",{"rating__container--readonly":r.readonly||e.starSet===10}])},[(p(!0),g(N,null,V(v(m),(_,c)=>(p(),g("div",{key:c,class:"rating__star"},[C(R,{"data-test":"star","data-star":c,"offset-percentage":_,onMouseenter:t[0]||(t[0]=i=>!r.readonly&&n(i,!0)),onMouseleave:t[1]||(t[1]=i=>!r.readonly&&n(i,!1)),onClick:i=>d(c)},null,8,["data-star","offset-percentage","onClick"])]))),128))],2))}});export{q as default};
