import{defineComponent as h,computed as L,openBlock as _,createElementBlock as p,createElementVNode as d,unref as g,ref as S,watch as F,onMounted as x,normalizeClass as k,Fragment as N,renderList as V,createVNode as A}from"vue";const C={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},M=["id"],w=["offset"],E=d("stop",{"stop-color":"#d2d5da",offset:"0%",id:"F1gst2"},null,-1),b=["fill"],B=h({__name:"IconStar",props:{offsetPercentage:{required:!1,default:0}},setup(l){const s=L(()=>"F1g-"+parseFloat((Math.random()*100).toString()).toFixed(0));return(t,r)=>(_(),p("svg",C,[d("defs",null,[d("linearGradient",{y2:"0%",x2:"100%",y1:"0%",x1:"0%",id:g(s)},[d("stop",{"stop-color":"#f9d949",offset:l.offsetPercentage+"%",id:"F1gst1"},null,8,w),E],8,M)]),d("path",{fill:"url(#"+g(s)+")",d:"M 30.335938 12.546875 L 20.164063 11.472656 L 16 2.132813 L 11.835938 11.472656 L 1.664063 12.546875 L 9.261719 19.394531 L 7.140625 29.398438 L 16 24.289063 L 24.859375 29.398438 L 22.738281 19.394531 Z"},null,8,b)]))}}),y=5,R=l=>{const s=S([]);return{generate:t=>{const r=l===5?t:t/2,i=Math.floor(r);let o=0;r%1!==0&&(o=Number(parseFloat((r%1).toString()).toFixed(2)));const m=o*100,n=[];for(let e=0;e<i;e++)n.push(100);n.push(m),[...Array(y).keys()].forEach(e=>{s.value[e]=n[e]})},starsSet:s}};var G="";const T=h({__name:"StarRating",props:{modelValue:{type:Number,default:0},score:{type:Number,default:0},starSet:{type:Number,default:5}},emits:["valueChange","update:modelValue"],setup(l,{emit:s}){const t=l,r=S(0),{starsSet:i,generate:o}=R(t.starSet),m=e=>{if(t.starSet===5){const a=e+1;s("valueChange",a),s("update:modelValue",a),r.value=a}},n=(e,a)=>{let f=e.target.dataset.star;if(f&&a){const u=+f;requestAnimationFrame(()=>{[...Array(y).keys()].forEach((c,v)=>{i.value[v]=v<=u?100:0})})}else o(r.value)};return F([()=>t.score,()=>t.modelValue],e=>{o(e[1])}),x(()=>{r.value=t.score||t.modelValue,o(r.value)}),(e,a)=>(_(),p("div",{"data-test":"star-container",class:k(["rating__container",{"rating__container--readonly":t.starSet===10}])},[(_(!0),p(N,null,V(g(i),(f,u)=>(_(),p("div",{key:u,class:"rating__star"},[A(B,{"data-test":"star","data-star":u,"offset-percentage":f,onMouseenter:a[0]||(a[0]=c=>n(c,!0)),onMouseleave:a[1]||(a[1]=c=>n(c,!1)),onClick:c=>m(u)},null,8,["data-star","offset-percentage","onClick"])]))),128))],2))}});export{T as default};
